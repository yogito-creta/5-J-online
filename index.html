<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>5/J SÄ±nÄ±f PortalÄ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  html { scroll-behavior: smooth; }
  body { margin: 0; font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg,#0f2027,#203a43,#2c5364); color: #fff; }
  header { padding: 18px; text-align: center; font-size: 26px; font-weight: 800; background: linear-gradient(135deg,#00c6ff,#0072ff); box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
  .container { max-width: 700px; margin: auto; padding: 20px; }
  .card { background: rgba(255,255,255,0.12); backdrop-filter: blur(12px); border-radius: 18px; padding: 22px; margin-bottom: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.35); animation: fadeUp 0.4s ease; }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
  #saat { font-size: 36px; font-weight: bold; text-align: center; text-shadow: 0 0 15px rgba(0,198,255,0.8); }
  #durum { font-size: 22px; text-align: center; margin-top: 6px; color: #00c6ff; }
  button { width: 100%; padding: 14px; margin-top: 10px; border: none; border-radius: 14px; background: linear-gradient(135deg,#00c6ff,#0072ff); color: #fff; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; }
  button:hover { transform: translateY(-2px); }
  .back { background: #555; margin-top: 20px; }
  .hidden { display: none; }
  ul { list-style: none; padding: 0; }
  li { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
  .scroll-area { max-height: 300px; overflow-y: auto; }
  input, textarea { width: calc(100% - 24px); padding: 12px; border-radius: 10px; border: none; margin-bottom: 10px; background: rgba(0,0,0,0.2); color: white; }
  .admin-box { border: 2px solid #2ecc71; padding: 15px; border-radius: 15px; margin-bottom: 20px; background: rgba(46, 204, 113, 0.05); }
  .gonderi-item { background: rgba(255,255,255,0.08); padding: 15px; border-radius: 12px; margin-bottom: 10px; border-left: 4px solid #00c6ff; }
</style>
</head>
<body>

<header>5/J SÄ±nÄ±f PortalÄ±</header>

<div class="container">
  <div class="card" id="timer-card">
    <div id="saat">00:00:00</div>
    <div id="durum">YÃ¼kleniyor...</div>
  </div>

  <div id="home" class="card">
    <button onclick="ac('ders')">ğŸ“š Ders ProgramÄ±</button>
    <button onclick="ac('duyuru')">ğŸ“¢ Duyurular & Haberler</button>
    <button onclick="ac('odev')">ğŸ““ Ã–devler</button>
    <button onclick="ac('ogretmen')">ğŸ‘¨â€ğŸ« Ã–ÄŸretmenlerimiz</button>
    <button onclick="ac('ogrenciler')">ğŸ‘¨ğŸ»â€ğŸ“ Ã–ÄŸrenci Listesi</button>
    <button onclick="ac('panosayfa')">ğŸ“ SÄ±nÄ±f Panosu</button>
    <button onclick="ac('giris-ekrani')" style="background: #e74c3c;">ğŸ” Admin Paneli</button>
  </div>

  <div id="ders" class="card hidden">
    <h3>ğŸ“… Ders ProgramÄ±</h3>
    <div class="scroll-area">
      <ul><li>Pazartesi: TÃ¼rkÃ§e(2), Ä°ngilizce(2), Sosyal, Matematik</li><li>SalÄ±: Ä°ngilizce(4), Matematik(2)</li><li>Ã‡arÅŸamba: Beden(2), Ä°ngilizce(4)</li></ul>
    </div>
    <button class="back" onclick="geri()">â¬… Geri</button>
  </div>

  <div id="ogretmen" class="card hidden">
    <h3>ğŸ‘¨â€ğŸ« Ã–ÄŸretmenler</h3>
    <ul><li>Remzi Emre Duman, AyÅŸe TÃ¼rk, AytaÃ§ Atar, Birsen Alkan, Mustafa Ã‡oban, Serkan Yaylaz, YaÅŸar Ã‡oban, GÃ¼lnur Kaya</li></ul>
    <button class="back" onclick="geri()">â¬… Geri</button>
  </div>

  <div id="ogrenciler" class="card hidden">
    <h3>ğŸ‘¨ğŸ»â€ğŸ“ 5/J Mevcut</h3>
    <div class="scroll-area">
      <ul><li>YiÄŸit, SÃ¼leyman, ADA MÄ°RA, ALÄ° MERT, ARÄ°FE SENA, BARIÅ, BÃœÅRA, CEMÄ°LE, DERÄ°N, DURU, ELA, ELÄ°F, EMÄ°R ENES...</li></ul>
    </div>
    <button class="back" onclick="geri()">â¬… Geri</button>
  </div>

  <div id="odev" class="card hidden">
    <h3>ğŸ““ GÃ¼ncel Ã–devler</h3>
    <div id="odevListesi"></div>
    <button class="back" onclick="geri()">â¬… Geri</button>
  </div>

  <div id="duyuru" class="card hidden">
    <h3>ğŸ“¢ Duyuru & Haber</h3>
    <div id="duyuruListesi"></div>
    <button class="back" onclick="geri()">â¬… Geri</button>
  </div>

  <div id="panosayfa" class="card hidden">
    <h3>ğŸ“ SÄ±nÄ±f Panosu</h3>
    <textarea id="gonderiText" placeholder="MesajÄ±nÄ± yaz..."></textarea>
    <button onclick="gonderiPaylas()" style="background:#e67e22;">GÃ¶nder</button>
    <div id="onayliGonderiler" style="margin-top:20px;"></div>
    <button class="back" onclick="geri()">â¬… Geri</button>
  </div>

  <div id="giris-ekrani" class="card hidden">
    <input id="gizliKod" type="password" placeholder="Kod (/admin112233)">
    <button onclick="adminKontrol()">GiriÅŸ</button>
    <button class="back" onclick="geri()">Geri</button>
  </div>

  <div id="admin-panel" class="card hidden">
    <h3>ğŸ›  YÃ¶netim Merkezi</h3>
    <input id="adminSifre" type="password" placeholder="Åifre (3131)">
    <div class="admin-box">
      <h4>ğŸ““ Ã–dev Ekle</h4>
      <input id="yOdevDers" placeholder="Ders">
      <input id="yOdevDetay" placeholder="Detay">
      <button onclick="odevEkle()">Kaydet</button>
    </div>
    <div class="admin-box">
      <h4>ğŸ“¢ Duyuru Ekle</h4>
      <input id="yDuyuru" placeholder="Duyuru">
      <button onclick="duyuruEkle()">YayÄ±nla</button>
    </div>
    <div id="onayBekleyenler"></div>
    <button class="back" onclick="geri()" style="background:#c0392b;">Ã‡Ä±kÄ±ÅŸ</button>
  </div>
</div>

<script>
  setInterval(() => { document.getElementById("saat").innerText = new Date().toLocaleTimeString(); }, 1000);
  
  function ac(id) {
    document.querySelectorAll(".card").forEach(c => { if(c.id !== 'timer-card') c.classList.add("hidden"); });
    document.getElementById(id).classList.remove("hidden");
    verileriCek();
  }
  function geri() { document.querySelectorAll(".card").forEach(c => c.classList.add("hidden")); document.getElementById("home").classList.remove("hidden"); }

  function adminKontrol() { if(document.getElementById("gizliKod").value === "/admin112233") ac('admin-panel'); }

  async function verileriCek() {
    const dRes = await fetch('/api/duyurular');
    const dData = await dRes.json();
    document.getElementById("duyuruListesi").innerHTML = `<ul>${dData.map(d => `<li>${d}</li>`).join('')}</ul>`;

    const oRes = await fetch('/api/odevler');
    const oData = await oRes.json();
    document.getElementById("odevListesi").innerHTML = `<ul>${oData.map(o => `<li><b>${o.ders}:</b> ${o.detay}</li>`).join('')}</ul>`;

    const gRes = await fetch('/api/onayli-liste');
    const gData = await gRes.json();
    document.getElementById("onayliGonderiler").innerHTML = gData.map(g => `<div class="gonderi-item">${g.metin}</div>`).reverse().join('');
  }

  async function odevEkle() {
    const s = document.getElementById("adminSifre").value;
    const d = document.getElementById("yOdevDers").value;
    const det = document.getElementById("yOdevDetay").value;
    await fetch('/api/odev-ekle', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ sifre: s, ders: d, detay: det }) });
    verileriCek();
  }

  async function duyuruEkle() {
    const s = document.getElementById("adminSifre").value;
    const m = document.getElementById("yDuyuru").value;
    await fetch('/api/duyuru-ekle', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ sifre: s, metin: m }) });
    verileriCek();
  }

  async function gonderiPaylas() {
    const m = document.getElementById("gonderiText").value;
    await fetch('/api/ekle', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ metin: m }) });
    alert("Onaya gitti!");
  }
  
  // Ä°lk aÃ§Ä±lÄ±ÅŸta verileri al
  verileriCek();
</script>
</body>
</html>
